<!DOCTYPE html>

<html lang="en"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <meta name="html-generator" content="teedoc-plugin-jupyter-notebook-parser">
        
        <meta name="blog-generator" content="teedoc-plugin-blog">
        
        <script src="/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/static/css/theme_default/prism.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/static/css/search/style.css" type="text/css"/>
        
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?789a62aac0b25ad52089ddb4f85128cd";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
        
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-MRHWDDNYB6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'G-MRHWDDNYB6');
    </script>
        
        <link rel="stylesheet" href="/static/css/gitalk/gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/gitalk/custom_gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/custom.css" type="text/css"/>
        
    
    
    <title>BPI-Steam</title>
    
    <script type="text/javascript">js_vars = {}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": null, "update": [], "ts": 0, "author": "", "brief": "", "cover": ""}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/">
                
                    <img class="site_logo" src="/static/image/logo.png" alt="Banana Pi logo">
                
                
                    <h2>wiki</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class=""><a  href="/en/">Home</a></li>
<li class="sub_items "><a  >Bit Series</a><ul><li class=""><a  href="/WebBit_doc/en/">WebBit User Manual</a></li>
<li class=""><a  href="/WebBit_dev/en/">WebBit Development Manual</a></li>
<li class=""><a  href="/Bit_S2_doc/en/">Bit-S2 User Manual</a></li>
</ul></li>
<li class=""><a  href="/WebAI/en/">WebAI</a></li>
<li class="active"><a  href="/Centi_S3_doc/en/">Centi-S3</a></li>
<li class=""><a  href="/Leaf_S3_doc/en/">Leaf-S3</a></li>
<li class="sub_items "><a  >Pico</a><ul><li class=""><a  href="/Pico_RP2040_doc/en/">Pico-RP2040</a></li>
<li class=""><a  href="/PicoW_S3_doc/en/">PicoW-S3</a></li>
</ul></li>
<li class="sub_items "><a  >Accessories</a><ul><li class=""><a  href="/Q-Car/en/">Q-Car</a></li>
<li class=""><a  href="/Triode-Car/en/">Triode-Car</a></li>
</ul></li>
<li class=""><a  href="/news/">news</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class="sub_items "><a  >language: English</a><ul><li class=""><a  href="/Centi_S3_doc/zh_tw/index.html">中文 繁體</a></li>
<li class=""><a  href="/Centi_S3_doc/zh/index.html">中文 简体</a></li>
<li class="active"><a  href="/Centi_S3_doc/en/index.html">English</a></li>
</ul></li>
</ul>

                <ul class="nav_plugins"><li><a id="google_translate_element"><img class="icon" src="/static/image/google_translate/translate.svg"/>Translate</a></li></ul><ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">Search</span>
                            <div id="search_hints">
                                <span id="search_input_hint">Enter keywords, separated by spaces</span>
                                <span id="search_loading_hint">Loading, please wait...</span>
                                <span id="search_download_err_hint">Failed to download the file, please refresh and try again or check the network</span>
                                <span id="search_other_docs_result_hint">Results from other docs</span>
                                <span id="search_curr_doc_result_hint">Current document search result</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="active with_link"><a href="/Centi_S3_doc/en/index.html"><span class="label">1. Centi-S3 Homepage</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/getting-started.html"><span class="label">Getting Started Guide</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">2. Code with MicroPython</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/Centi_S3_doc/en/MicroPython/What_is_MicroPython.html"><span class="label">What is MicroPython?</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/MicroPython/environment.html"><span class="label">Install and configure the environment</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/MicroPython/VScode_mpbridge.html"><span class="label">How to use VScode + mpbridge tool</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/MicroPython/REPL_use_case.html"><span class="label">REPL Use Case</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/MicroPython/Burn_firmware.html"><span class="label">Burn firmware</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/MicroPython/lcd_init.html"><span class="label">LCD Screen init</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/MicroPython/Display_jpg_images.html"><span class="label">Display jpg images</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/MicroPython/Display_text.html"><span class="label">Display text characters</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/MicroPython/Make_semi-transparent_rectangular_text_box.html"><span class="label">Make semi-transparent rectangular text box</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/MicroPython/Refres_textbox_on_jpg.html"><span class="label">Refresh textbox on jpg</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/MicroPython/Display_multiple_vector_fonts.html"><span class="label">Display multiple vector fonts</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">3. Code with Arduino</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/Centi_S3_doc/en/Arduino/Environment.html"><span class="label">Install and configure the environment</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/Arduino/Arduino_upload.html"><span class="label">Connect, Upload</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/Arduino/Arduino_GFX_Install.html"><span class="label">Install Arduino GFX library</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Centi_S3_doc/en/Arduino/Arduino_GFX_show_characters.html"><span class="label">Arduino GFX, show characters</span><span class=""></span></a></li>
</ul>
</li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1></h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                                <span class="article_date" title="Last modify date: 2023-11-01">
                                    2023-11-01
                                </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                            <div id="source_link">
                                <a href="https://github.com/BPI-STEAM/BPI-Doc/blob/main/docs/Centi_S3_doc/en/README.md" target="_blank">
                                    Edit this page
                                </a>
                            </div>
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <h2 id="Introduction">Introduction</h2>
<p><img src="assets/images/BPI-Centi-S3.jpg" alt="" /></p>
<p>BPI-Centi-S3 is a small-sized ESP32-S3 development board with an 1.9-inch LCD onboard, suitable for the development of Internet of Things application projects including color display, interactive control, wireless communication, and sensor data acquisition.</p>
<p>Using the Espressif ESP32-S3 chip, it supports 2.4 GHz Wi-Fi and Bluetooth® Low Energy (Bluetooth® LE) dual-mode wireless communication.</p>
<p>Within the compact board, it also provides an additional rotary encoder, a buzzer, a WS2812 color LED, and all other available pins for external peripherals connection to meet diverse needs.</p>
<p>Support both USB and external 3.7V lithium battery power input. With the board's designed battery voltage detection circuit, it can automatically detect and switch to USB power supply when both are connected. And also supports USB charging mode, convenient for power management.</p>
<h2 id="Key-Features">Key Features</h2>
<ul>
<li>ESP32-S3, Xtensa® 32 bit LX7 Processor</li>
<li>2M PSRAM, 8M FLASH</li>
<li>2.4G WIFI, Bluetooth 5, Bluetooth mesh</li>
<li>GPIO, PWM, I2C, SPI, RMT, I2S, UART, USB, JTAG</li>
<li>1 * ST7789 TFT LCD, 1.9-inch, 170*320 resolution, 8bit 8080 parallel port</li>
<li>1 * Rotary Encoder</li>
<li>1 * Buzzer</li>
<li>1 * full color LED</li>
<li>1 * SH 1mm 4-Pin I2C connector</li>
<li>2 * SH 1mm 6-Pin</li>
<li>1 * USB Type-C connector</li>
<li>1 * MX 1.25mm 2-Pin battery connector, supports charging</li>
<li>2 * M3 Screw Mounting Holes</li>
</ul>
<h2 id="Hardware">Hardware</h2>
<h3 id="Hardware-Interface-Schematic-Diagram">Hardware Interface Schematic Diagram</h3>
<p><img src="assets/images/BPI-Centi-S3_drawio.png" alt="" /></p>
<h3 id="Hardware-Specifications">Hardware Specifications</h3>
<table>
<thead>
<tr>
  <th style="text-align:center"></th>
  <th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
  <td style="text-align:center">SoC</td>
  <td style="text-align:center">ESP32-S3, Xtensa® 32-bit LX7 dual-core processor</td>
</tr>
<tr>
  <td style="text-align:center">Clock Frequency</td>
  <td style="text-align:center">240MHz MAX</td>
</tr>
<tr>
  <td style="text-align:center">Internal ROM</td>
  <td style="text-align:center">384 KB</td>
</tr>
<tr>
  <td style="text-align:center">Internal SRAM</td>
  <td style="text-align:center">320 KB</td>
</tr>
<tr>
  <td style="text-align:center">Onboard FLASH ROM</td>
  <td style="text-align:center">8MB</td>
</tr>
<tr>
  <td style="text-align:center">On-chip PSRAM</td>
  <td style="text-align:center">2MB</td>
</tr>
<tr>
  <td style="text-align:center">WIFI</td>
  <td style="text-align:center">IEEE 802.11 b/g/n, 2.4Ghz frequency band, 150Mbps</td>
</tr>
<tr>
  <td style="text-align:center">bluetooth</td>
  <td style="text-align:center">Bluetooth 5, Bluetooth mesh</td>
</tr>
<tr>
  <td style="text-align:center">External crystal oscillator</td>
  <td style="text-align:center">40Mhz</td>
</tr>
<tr>
  <td style="text-align:center">RTC and Low­Power Management</td>
  <td style="text-align:center">Power Management Unit (PMU) + Ultra-­Low-­Power Coprocessor(ULP)</td>
</tr>
<tr>
  <td style="text-align:center">GPIO</td>
  <td style="text-align:center">9 available GPIOs have been exported to the SH socket</td>
</tr>
<tr>
  <td style="text-align:center">Support Peripherals</td>
  <td style="text-align:center">I2C, SPI, PWM, UART, RMT, I2S, SD</td>
</tr>
<tr>
  <td style="text-align:center">SH 1mm socket</td>
  <td style="text-align:center">1 * 4Pin, 2 * 6Pin</td>
</tr>
<tr>
  <td style="text-align:center">USB</td>
  <td style="text-align:center">1 * Full Speed USB 2.0 OTG, Type-C Female</td>
</tr>
<tr>
  <td style="text-align:center">USB Serial/JTAG Controller</td>
  <td style="text-align:center">1, USB full speed standard, CDC-ACM, JTAG</td>
</tr>
<tr>
  <td style="text-align:center">TFT LCD size</td>
  <td style="text-align:center">1.9 inches</td>
</tr>
<tr>
  <td style="text-align:center">TFT LCD resolution</td>
  <td style="text-align:center">170 * 320 RGB</td>
</tr>
<tr>
  <td style="text-align:center">TFT LCD control chip</td>
  <td style="text-align:center">ST7789V3</td>
</tr>
<tr>
  <td style="text-align:center">TFT LCD interface</td>
  <td style="text-align:center">8bit 8080 parallel port</td>
</tr>
<tr>
  <td style="text-align:center">Encoder</td>
  <td style="text-align:center">1 * Incremental Rotary Encoder, support pressing function</td>
</tr>
<tr>
  <td style="text-align:center">Buzzer</td>
  <td style="text-align:center">1</td>
</tr>
<tr>
  <td style="text-align:center">Color LED</td>
  <td style="text-align:center">1 * WS2812 2020 LED</td>
</tr>
<tr>
  <td style="text-align:center">Button</td>
  <td style="text-align:center">RST Button, BOOT Button</td>
</tr>
<tr>
  <td style="text-align:center">Screw Holes</td>
  <td style="text-align:center">2 * M3 Screw Holes</td>
</tr>
<tr>
  <td style="text-align:center">Machine working temperature</td>
  <td style="text-align:center">-20℃ ~ +60℃</td>
</tr>
<tr>
  <td style="text-align:center">Working voltage</td>
  <td style="text-align:center">3.3V</td>
</tr>
<tr>
  <td style="text-align:center">USB input voltage</td>
  <td style="text-align:center">3.3V~5.5V</td>
</tr>
<tr>
  <td style="text-align:center">Maximum discharge current</td>
  <td style="text-align:center">2A@3.3V DC/DC</td>
</tr>
<tr>
  <td style="text-align:center">Battery connector</td>
  <td style="text-align:center">MX 1.25mm 2-Pin</td>
</tr>
<tr>
  <td style="text-align:center">USB charging</td>
  <td style="text-align:center">Support</td>
</tr>
<tr>
  <td style="text-align:center">Maximum charging current</td>
  <td style="text-align:center">500mA</td>
</tr>
</tbody>
</table>
<h3 id="Hardware-Dimensions">Hardware Dimensions</h3>
<p><img src="assets/images/BPI-Centi-S3-V0.2_Dimensions.jpg" alt="" /></p>
<h3 id="LCD-Wiring-Definition">LCD Wiring Definition</h3>
<table>
<thead>
<tr>
  <th style="text-align:center"></th>
  <th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
  <td style="text-align:center">ESP_LCD_BLK</td>
  <td style="text-align:center">GPIO2</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_RES</td>
  <td style="text-align:center">GPIO3</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_CS</td>
  <td style="text-align:center">GPIO4</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_D/C</td>
  <td style="text-align:center">GPIO5</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_WR</td>
  <td style="text-align:center">GPIO6</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_RD</td>
  <td style="text-align:center">GPIO7</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_D0</td>
  <td style="text-align:center">GPIO8</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_D1</td>
  <td style="text-align:center">GPIO9</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_D2</td>
  <td style="text-align:center">GPIO10</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_D3</td>
  <td style="text-align:center">GPIO11</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_D4</td>
  <td style="text-align:center">GPIO12</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_D5</td>
  <td style="text-align:center">GPIO13</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_D6</td>
  <td style="text-align:center">GPIO14</td>
</tr>
<tr>
  <td style="text-align:center">ESP_LCD_D7</td>
  <td style="text-align:center">GPIO15</td>
</tr>
<tr>
  <td style="text-align:center">ESP_TP_RESET</td>
  <td style="text-align:center">GPIO16</td>
</tr>
<tr>
  <td style="text-align:center">II2C_SCL</td>
  <td style="text-align:center">GPIO17</td>
</tr>
<tr>
  <td style="text-align:center">II2C_SDA</td>
  <td style="text-align:center">GPIO18</td>
</tr>
<tr>
  <td style="text-align:center">ESP_TP_INT</td>
  <td style="text-align:center">GPIO21</td>
</tr>
</tbody>
</table>
<h3 id="Peripheral-Wiring-Definition">Peripheral Wiring Definition</h3>
<table>
<thead>
<tr>
  <th style="text-align:center"></th>
  <th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
  <td style="text-align:center">RST button</td>
  <td style="text-align:center">RST(CHIP_PU)</td>
</tr>
<tr>
  <td style="text-align:center">BOOT button</td>
  <td style="text-align:center">GPIO0</td>
</tr>
<tr>
  <td style="text-align:center">BAT_ADC battery voltage detection</td>
  <td style="text-align:center">GPIO1</td>
</tr>
<tr>
  <td style="text-align:center">Buzzer</td>
  <td style="text-align:center">GPIO36</td>
</tr>
<tr>
  <td style="text-align:center">EC_KEY Rotary Encoder</td>
  <td style="text-align:center">GPIO35</td>
</tr>
<tr>
  <td style="text-align:center">EC_A Rotary Encoder</td>
  <td style="text-align:center">GPIO37</td>
</tr>
<tr>
  <td style="text-align:center">EC_B Rotary Encoder</td>
  <td style="text-align:center">GPIO47</td>
</tr>
<tr>
  <td style="text-align:center">WS2812B-2020</td>
  <td style="text-align:center">GPIO48</td>
</tr>
</tbody>
</table>
<h3 id="Buy-it">Buy it</h3>
<p><a href="https://www.aliexpress.com/item/1005005510964130.html"  target="_blank">Aliexpress</a></p>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                    </div>
                    <div id="next">
                        
                        <a href="/Centi_S3_doc/en/getting-started.html">
                            <span class="label">Getting Started Guide</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>Link</a><ul><li><a target="_blank" href="https://www.banana-pi.org.cn">Banana Pi</a></li>
<li><a target="_blank" href="http://wiki.banana-pi.org/Main_Page">Wiki</a></li>
<li><a target="_blank" href="https://webduino.com.cn/site/en_cn/index.html">Webduino</a></li>
<li><a target="_blank" href="https://shop108780008.taobao.com/">Taobao</a></li>
</ul>
</li>
<li><a>Source Code</a><ul><li><a target="_blank" href="https://github.com/BPI-STEAM/BPI-Doc">Source file of this website</a></li>
<li><a target="_blank" href="https://github.com/BPI-SINOVOIP">BananaPi source file</a></li>
</ul>
</li>
<li><a>Contact us</a><ul><li><a>Tel: +86 0755-26475332</a>
</li>
<li><a>Business Support: sales@banana-pi.com (Sales Department)</a>
</li>
<li><a>Technical Support: support@banana-pi.com (Technical Department)</a>
</li>
<li><a>Address: 7th Floor, Rongyi Building, Songshan Lake High-tech Industrial Development Zone, Guangdong Province</a>
</li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://bpi-steam.com/">Copyright © 2022 Banana Pi</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script type="text/javascript">
                var transLoaded = false;
                var loading = false;
                var domain = "translate.google.com";
                var domainDefault = domain;
                var storeDomain = localStorage.getItem("googleTransDomain");
                if(storeDomain){
                    domain = storeDomain;
                    console.log("load google translate domain from local storage:" + domain);
                }
                function getUrl(domain){
                    if(domain == "/")
                        return "/static/js/google_translate/element.js?cb=googleTranslateElementInit";
                    else
                        return "https://" + domain + "/translate_a/element.js?cb=googleTranslateElementInit";
                }
                var url = getUrl(domain);
                console.log("google translate domain:" + domain + ", url: " + url);
                function googleTranslateElementInit() {
                    new google.translate.TranslateElement({pageLanguage: "auto", layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
                }
                function loadJS( url, callback ){
                    var script = document.createElement('script');
                    fn = callback || function(){ };
                    script.type = 'text/javascript';
                    if(script.readyState){
                        script.onreadystatechange = function(){
                            if( script.readyState == 'loaded' || script.readyState == 'complete' ){
                                script.onreadystatechange = null;
                                fn();
                            }
                        };
                    }else{
                        script.onload = function(){
                            fn();
                        };
                    }
                    script.src = url;
                    document.getElementsByTagName('head')[0].appendChild(script);
                }
                function removeHint(){
                    var hint = document.getElementById("loadingTranslate");
                    if(hint){
                        hint.remove();
                    }
                }
                var btn = document.getElementById("google_translate_element");
                btn.onclick = function(){
                    if(transLoaded) return;
                    if(loading){
                        var flag = confirm("loading from " + domain + ", please wait, or change domain?");
                        if(flag){
                            newDomain = prompt("domain, default: " + domainDefault + ", now: " + domain);
                            if(newDomain){
                                domain = newDomain;
                                console.log(domain);
                                url = getUrl(domain);
                                loadJS(url, function(){
                                    localStorage.setItem("googleTransDomain", domain);
                                    removeHint()
                                    transLoaded = true;
                                });
                            }
                        }
                        return;
                    }
                    btn.innerHTML = '<span id="loadingTranslate"><img class="icon" src="/static/image/google_translate/translate.svg"/>Loading ...</span>';
                    loading = true;
                    loadJS(url, function(){
                        localStorage.setItem("googleTransDomain", domain);
                        removeHint()
                        transLoaded = true;
                    });
                }
                </script>
            
    
        <script src="/static/js/plugin_blog/main.js"></script>
    
        <script src="/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/static/js/theme_default/main.js"></script>
    
        <script src="/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/static/css/theme_default/prism.min.js"></script>
    
        <script src="/static/js/search/search_main.js"></script>
    
        <script src="/static/js/gitalk/gitalk.min.js"></script>
    
        <script src="/static/js/gitalk/main.js"></script>
    
        <script src="/static/js/custom.js"></script>
    
</body>

</html>