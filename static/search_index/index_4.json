{"/Bit_S2_doc/en/CircuitPython/flash_tinyuf2.html":{"title":"How to burn tinyUF2 firmware","content":"# How to burn tinyUF2 firmware > All operations on flash are irreversible, pay attention to back up important files such as codes in advance. ## Download tinyUF2 firmware 1. Enter the [BPI Bit S2 CircuitPython Download](https://circuitpython.org/board/bpi_bit_s2/) page. 2. Find the `Install, Repair, or Update UF2 Bootloader` column at the bottom of the page, and click the `DOWNLOAD BOOTLOADER ZIP` button at the bottom to download the compressed package. 3. Decompress the compressed package locally, the `combined.bin` file is the firmware we need. ## Put the board in bootloader mode 1. Connect the development board to the computer via USB. 2. Press and hold the `BOOT` button, and the red light on the back of the development board will remain off. 3. Press the `RST` button once. 4. Release the `BOOT` button, and the red light on the back of the development board will remain on. ## Burn the firmware in the browser > Support Chrome, Edge browser, the kernel version must be higher than 89. 1. Open the [ESP Web Flasher](https://nabucasa.github.io/esp web flasher/) page. 2. Click the `Connect` button, an option bar will pop up, select the serial port where the development board is located. ![](../assets/images/picow_s3_tinyuf2_download_1.png) ![](../assets/images/picow_s3_tinyuf2_download_2.png) 3. After normal connection, click the `Erase` button to erase the flash contents of the development board, this process is irreversible. ![](../assets/images/picow_s3_tinyuf2_download_3.jpg) 4. Click the `Choose a file...` button, jump to the directory where the `combined.bin` file is located in the pop up file selection window, select this file and click OK. 5. Click the `Program` button to start burning the firmware, wait for about five minutes to complete. 6. After the completion, manually press the `Reset` button once, the sign of successful programming is that the first colored light is always green, and a USB storage disk named `BITS2BOOT` will be seen in the computer system. If you don't get this result, you can retry the first five steps, or try the next burning method. ## esptool local burning firmware 1. Open the [Python official website](https://www.python.org/). For the Windows system, the most convenient way to download the installation package is to click the icon shown in the figure below on the homepage of the official website to download. ![](../assets/images/Micropython_operating_env_1.png) Other operating systems or other distributions can be selected in the Downloads option bar. It is recommended to use a version above python 3.7. 2. Be sure to check Add Python 3.x to PATH when starting the installation, so that you can avoid adding it to PATH manually. ![](../assets/images/Micropython_operating_env_2.png) Follow the installation prompts step by step to complete the installation smoothly. 3. Taking the specific operation steps of Windows PowerShell as an example, use the following command to install esptool: ```shell pip install esptool ``` If necessary in the future, you can use the following command to upgrade esptool: ```shell pip install U esptool ``` 4. Use commands or other methods to enter the directory where the firmware is located in PowerShell. 5. You can open the PowerShell window in this folder by holding down the shift key and right clicking in the Windows folder window. 6. At this point, you need to set the development board to bootloader mode, see above for details. 7. Use the following command to clear the flash, you need to modify the COM interface to the corresponding interface, here is COM22. ```shell python m esptool chip esp32s3 port COM22 baud 460800 erase_flash ``` 8. Use the following command to burn `combined.bin` firmware, you need to modify the COM interface to the corresponding interface, here is COM22. ```shell python m esptool chip esp32s3 port COM22 baud 460800 write_flash z 0x0 combined.bin ``` 9. After finishing, manually press the `Reset` button once, the sign of successful programming is that the colorful light is a constant green light, if you do not get this result, you can try the first two steps of the command again."},"/Bit_S2_doc/en/CircuitPython/Basic.html":{"title":"Basic function usage","content":"# Basic function usage ## REPL simple to use ### Hello World! 1. Make sure that the development board is correctly connected in the Mu editor, refer to [Configuring the environment (Mu editor)](config_mu editor.html). 2. The following information usually appears in the CircuitPython REPL window. The appearance of the `>>>` symbol means that we can start to enter commands to interact with it. ``` ]0;ğŸWi Fi: off Done 8.0.0 beta.0 49 g14fc4a079\\Auto reload is on. Simply save files over USB to run them or enter REPL to disable. Press any key to enter the REPL. Use CTRL D to reload. ]0;ğŸWi Fi: off Done 8.0.0 beta.0 49 g14fc4a079\\]0;ï¿½Wi Fi: off REPL 8.0.0 beta.0 49 g14fc4a079\\ Adafruit CircuitPython 8.0.0 beta.0 49 g14fc4a079 on 2022 09 20; BPI Bit S2 with ESP32S3 >>> ``` 3. Start typing the command on the right side of the `>>>` symbol, for example: `print(\"Hello World!\")`. > Note that using the English input method, Chinese characters cannot be recognized by the REPL. ```py >>> print(\"Hello World!\") Hello World! >>> ``` ### REPL shortcut keys 1. Copy `ctrl + shift + c`. 2. Paste `ctrl + shift + v`. Use the left mouse button to drag and select the command to be copied in the REPL, press the copy shortcut key on the keyboard, and then press the paste shortcut key to copy and paste the command. 3. Soft reset `ctrl + d`. 4. Interrupt `ctrl + c`, interrupt the currently executing program, but will not restart and reset. ### View built in modules 1. Entering `help(\"modules\")` in the REPL will list all modules in the current CircuitPython development board. 2. After importing the module, you can use the `help()` function to view the function names or variable names available inside the module. For example, if you view the `board` module, you can see all the available pins and peripheral functions of the development board. ```py >>> import board >>> help(board) object <module 'board'> is of type module __name__ board board_id bpi_bit_s2 IO0 board.IO0 A0 board.IO0 D0 board.IO0 DAC1 board.IO0 BUZZER board.IO0 IO1 board.IO1 A1 board.IO1 D1 board.IO1 IO2 board.IO2 A2 board.IO2 D2 board.IO2 IO3 board.IO3 A3 board.IO3 D3 board.IO3 IO4 board.IO4 A4 board.IO4 D4 board.IO4 IO5 board.IO5 A5 board.IO5 D5 board.IO5 IO6 board.IO6 A6 board.IO6 D6 board.IO6 IO7 board.IO7 A7 board.IO7 D7 board.IO7 IO8 board.IO8 A8 board.IO8 D8 board.IO8 IO9 board.IO9 A9 board.IO9 D9 board.IO9 IO10 board.IO10 A10 board.IO10 D10 board.IO10 IO11 board.IO11 A11 board.IO11 D11 board.IO11 IO12 board.IO12 D12 board.IO12 IO13 board.IO13 SCK board.IO13 D13 board.IO13 IO14 board.IO14 MISO board.IO14 D14 board.IO14 IO15 board.IO15 MOSI board.IO15 D15 board.IO15 IO16 board.IO16 CS board.IO16 D16 board.IO16 SCL board.SCL IO19 board.SCL SDA board.SDA IO20 board.SDA BOOT0 board.BOOT0 LEDs board.BOOT0 BUTTON_A board. BUTTON_A BUTTON_B board.BUTTON_B LUM1 board.LUM1 LUM2 board.LUM2 TEMPERATURE board. TEMPERATURE NEOPIXEL board.NEOPIXEL TX board.TX RX board.RX I2C <function> SPI <function> UART <function> >>> ``` ## Make a WS2812 color light blink 1. Click the **Load** button in the Mu editor, select the code.py file on the CircuitPython development board, and click **Open** to start editing code.py. 2. Enter the following code in the editor: ```python import time import board import neopixel pixels neopixel.NeoPixel(board.NEOPIXEL, 25, brightness 0.1) while 1: pixels[0] (255,0,0) pixels. show() time. sleep(0.5) pixels[0] (0,255,0) pixels. show() time. sleep(0.5) pixels[0] (0,0,255) pixels. show() time. sleep(0.5) pixels[0] (255,255,255) pixels. show() time. sleep(0.5) ``` 3. Click the **Save** button, and the edited content will be saved to the CircuitPython development board. If the code is correct, the first colored LED on the development board will flash red, green, blue and white in a cycle. Reset the development board or power it on again, and the program will start running again. 4. Use the interrupt shortcut key in the REPL to stop the program from running. 5. The code can also be directly copied and pasted into the REPL to run. > All subsequent examples can be edited in the code.py file or copied and pasted into the REPL to run. However, after the program code in the code.py file is executed, the development board will return to the state when it is not running, and the state will not be retained, but the state will be retained when executed in the REPL. ## Use 25 WS2812 lanterns 1. Based on the code in the previous section **Make a WS2812 lantern blink**, use the for loop to light up 25 WS2812 lanterns in sequence. ```python import time import board import neopixel pixels neopixel.NeoPixel(board.NEOPIXEL, 25, brightness 0.1) while 1: for i in range(25): pixels[i] (255,0,0) pixels. show() time. sleep(0.1) for i in range(25): pixels[i] (0,255,0) pixels. show() time. sleep(0.1) for i in range(25): pixels[i] (0,0,255) pixels. show() time. sleep(0.1) for i in range(25): pixels[i] (255,255,255) pixels. show() time. sleep(0.1) ``` 2. If you want to control the colors of all lights at the same time, use `pixels.show()` to send the data to WS2812 lights after the for loop is over. ```python import time import board import neopixel pixels neopixel.NeoPixel(board.NEOPIXEL, 25, brightness 0.1) while 1: for i in range(25): pixels[i] (255,0,0) pixels. show() time. sleep(0.5) for i in range(25): pixels[i] (0,255,0) pixels. show() time. sleep(0.5) for i in range(25): pixels[i] (0,0,255) pixels. show() time. sleep(0.5) for i in range(25): pixels[i] (255,255,255) pixels. show() time. sleep(0.5) ``` 1. The communication protocol of the WS2812 lantern adopts the single line return to zero code communication method, that is, one signal line can control all the lamp beads connected in series. Each lamp bead can be regarded as an 8bit RGB pixel point. After the pixel point is powered on and reset, the DIN terminal (data receiving end) receives the data transmitted from the controller, and the 24bit data sent first is the first After each pixel point is extracted, it is sent to the data latch inside the pixel point, and the remaining data is reshaped and amplified by the internal shaping processing circuit, and then forwarded and output to the next cascaded pixel point through the DO terminal (data sending end). For the transmission of one pixel, the signal is reduced by 24 bits. ** WS2812 lanterns adopt automatic shaping and forwarding technology, so that the number of cascaded pixels is not limited, only limited by the requirements of signal transmission speed. ## Make the pin output high and low levels to control the LED 1. `board.LED` controls a single color LED on Bit S2. When it is high, it turns on, and when it is low, it turns off. Enter the following code in the REPL: ```py import board import digitalio ledpin digitalio.DigitalInOut(board.LED) ledpin.direction digitalio.Direction.OUTPUT ledpin.value True ``` 2. Or do this: ```py import the board import digitalio ledpin digitalio.DigitalInOut(board.LED) ledpin.switch_to_output(value True) # value 1 ``` 3. Let the LED blink at intervals of 0.5 seconds: ```py import board import digitalio import time ledpin digitalio.DigitalInOut(board.LED) while True: ledpin. switch_to_output(value 1) time. sleep(0.5) ledpin. switch_to_output(value 0) time. sleep(0.5) ``` 4. Use the interrupt shortcut key in the REPL to stop the program from running. 5. Enter `import board;help(board)` in the REPL to list all controllable pins. `board.GP25` is exactly the same as `board.LED`."},"/Bit_S2_doc/en/CircuitPython/supported_by_circuitpython.html":{"title":"Officially supported by CircuitPython","content":"# Officially supported by CircuitPython 1. Supported by the adafruit/circuitpython GitHub repository. https://github.com/adafruit/circuitpython/pull/6899 branch has been merged. 2. Supported by the adafruit/tinyuf2 GitHub repository. https://github.com/adafruit/tinyuf2/pull/196 branch has been merged. 3. Supported by the adafruit/circuitpython org GitHub repository. https://github.com/adafruit/circuitpython org/pull/1049 branch has been merged. 4. The circuitpython.org website is available for downloading circuitpython firmware and tinyuf2 firmware. https://circuitpython.org/board/bpi_bit_s2/"},"/Bit_S2_doc/en/CircuitPython/update_circuitpython.html":{"title":"How to update CircuitPython firmware","content":"# How to update CircuitPython firmware > This method is applicable to development boards that already have tinyUF2 firmware. If the flash of the development board is erased or fails to enter UF2 mode, please refer to [How to burn tinyUF2 firmware](flash_tinyuf2.html). 1. Enter the [BPI PicoW S3 CircuitPython Download](https://circuitpython.org/board/bpi_picow_s3/) page. 2. Click the DOWNLOAD UF2 NOW button to download the latest released `.uf2` firmware. 3. Connect the development board to the computer via USB. If the CircuitPython firmware has been installed, a disk named `CIRCUITPY` will appear on the computer file management page. This is a disk in CircuitPython mode, and it needs to be changed to a disk in UF2 mode. The following are the specific steps. 1. Quickly press the `RST` key once. 2. Quickly press the `BOOT` button once when the first colored light turns purple. 4. The name of the disk in UF2 mode is `BITS2BOOT`, copy the `.uf2` firmware downloaded in step 1 to this disk, and the colored light will flash orange during the process. Do not disconnect or do anything to the board during this process. 5. After the CircuitPython firmware update is completed, it will automatically reset, and a `CIRCUITPY` disk will reappear on the computer file management page, and the specific firmware version can be viewed through the REPL."},"/Bit_S2_doc/en/CircuitPython/config_mu-editor.html":{"title":"Configure the use environment (Mu editor)","content":"# Configure the use environment (Mu editor) ## Download and install Mu editor 1. Enter [**Mu Editing Organ Network**](https://codewith.mu/), click the **Download** button to enter the new page. ![](../assets/images/Download_mu_1.png) 2. Select the operating system currently used by your computer, and click the **Download** button corresponding to the operating system to start downloading the installation package. ![](../assets/images/Download_mu_2.png) 3. Click the **Instuctions** button corresponding to the operating system to view the detailed installation steps, and install according to the guidelines. ## Establish the connection between the Mu editor and the development board 1. Start the Mu editor and change the mode to CircuitPython. If you have connected the CircuitPython development board correctly, you will be prompted whether to switch to this mode directly. ![](../assets/images/Download_mu_3.png) ![](../assets/images/Download_mu_4.png) 2. Click the **Serial** button, then press any key to enter the CircuitPython REPL. ![](../assets/images/Download_mu_5.png)"},"/Bit_S2_doc/en/Unboxing/Introduction.html":{"title":"Development Board Introduction","content":"# Development Board Introduction BPI Bit S2 development board is a successor to BPI Bit, inheriting most of the hardware functions. IO is compatible with micro:bit and can use most peripheral accessories of micro:bit. Support Webduino, Arduino, MicroPython & CircuitPython programming environment suitable for STEAM education. ## Key features * ESP32 S2 * 5x5 RGB LED matrix * 1 buzzer * 1 thermistor sensor * 2 photosensitive sensors * 2 programmable keys,1 BOOT key,1 Reset key * Type C USB interface * Size 5x5cm * The Goldfinger Edge Connector definition is fully compatible with Micro: Bit ## Hardware ### Diagram ![](../assets/images/bpi_bit_v2_interface_en.jpg) ### Hardware Specifications Features Specs MCU ESP32 S2FN4R2ï¼ŒXtensaÂ® 32 bit LX7 Single Core Processer Frequency 240MHz MAX operating temperature 40â„ƒ~+85â„ƒ ROM 128 KB SRAM 320 KB FLASH ROM 4 MB PSRAM 2 MB WIFI IEEE 802.11 b/g/n ï¼Œ2.4Ghz GPIO 19 available GPIO pins have been introduced Peripheral functions ADC,TOUCH,PWM,SPI,I2C,I2S,Pulse counter, RMT,TWAIÂ® Controller,SD/MMC,LCD_CAMERA External crystal 40Mhz Buzzer 8.5x8.5mm buzzer LED 25 WS2812 rgb LED, single line GPIO control; 1 monochrome LED, controlled by GPIO0 Photosensitive sensor 2 photosensitive sensor Thermistor sensor 1 thermistor sensor IO 19 pins Goldfinger IO,19 pins contacts on the back Key 2 programmable keys,1 BOOT key,1 Reset key USB USB Type C interfaceï¼Œfull speed USB OTG,USB ACM Operating voltage 3.3V Power USB Type C input 5Vï¼Œor Goldfinger IO input 3.3V power supply Size 5 * 5 cm ### On board peripherals On board peripherals GPIO Signal type : :: :: : Photosensitive sensor(L) GPIO 12 Analog Input Photosensitive sensor(R) GPIO 13 Analog Input Key A GPIO 38 Digital Input Key B GPIO 33 Digital Input Key BOOT GPIO 0 Digital Input Thermistor sensor GPIO 14 Analog Input Buzzer GPIO 17 PWM(Digital Output) RGB_LED GPIO 18 Digital Output ### 5*5 RGB LED BPI Bit S2 have 25 WS2812 full color RGB LED, single GPIO ontrol. The three primary color pixels of each LED can achieve 8bit 256 level brightness display, and achieve 16777216 color full color display, scanning frequency is not less than 400Hz/s. : :: :: :: :: : 20 15 10 5 0 21 16 11 6 1 22 17 12 7 2 23 18 13 8 3 24 19 14 9 4 ### Goldfinger GPIO define ![](../assets/images/bpi_bit_v2_goldfinger.jpg) ### SPI and I2C preset pins Function Pin Name GPIO Num SPI_SCK P13 GPIO36 SPI_MISO P14 GPIO37 SPI_MOSI P15 GPIO35 SPI_CS P16 GPIO34 I2C_SCL P19 GPIO16 I2C_SDA P20 GPIO15 ### Power BPI Bit S2 supports two power supply modes 1. Type C USBï¼šUse USB cable power supply, connect USB interface of computer or other 5V USB charger to power the development board. 2. Gold finger: At the bottom of the development board, the gold finger contains a power interface with both input and output functions. It uses 3.3V power supply, positive terminal is connected to 3V3, and negative terminal is connected to GND. ## Resources [GitHub: BPI BPI Bit S2 Development Board Schematic PDF](https://github.com/BPI STEAM/BPI BIT Lite Doc/blob/main/sch/BPI BIT Lite V0.2.pdf)"},"/Bit_S2_doc/en/Arduino/Basic.html":{"title":"æ¿è½½èµ„æºçš„ä½¿ç”¨","content":"# æ¿è½½èµ„æºçš„ä½¿ç”¨ æœ¬ç« ä¸»è¦æ˜¯é€šè¿‡ä¸€äº›ç¤ºä¾‹é¡¹ç›®ï¼Œé˜è¿° BPI Bit S2 çš„å¤–è®¾çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œé€šè¿‡ä¸‹é¢çš„é¡¹ç›®ï¼Œæ‚¨å¯ä»¥è¿›è¡Œä¿®æ”¹å®Œæˆæ‚¨çš„è‡ªå·±çš„é¡¹ç›®ã€‚ > ä¸Šä¼ ä»£ç æ—¶éœ€è¦å°† BPI Bit S2 å¼€å‘æ¿ç½®äºbootloaderæ¨¡å¼ã€‚ ç¡®ä¿æœ‰ä¸€æ ¹type cæ•°æ®çº¿ï¼Œä¸€ç«¯è¿æ¥åˆ°PCï¼Œæ‹¿èµ·å¼€å‘æ¿ï¼Œä¿æŒä¸Šé¢æ— ä»»ä½•è¿çº¿æˆ–å¤–å›´ç¡¬ä»¶ï¼ŒæŒ‰ä½BootæŒ‰é’®ï¼Œå°†type cæ•°æ®çº¿ä¸å¼€å‘æ¿è¿æ¥ï¼Œæ¾å¼€BootæŒ‰é’®ï¼Œåœ¨ Tools > Portsä¸­é€‰æ‹©æ–°å‡ºç°çš„ç«¯å£ã€‚ ç‚¹å‡» Upload å³å¯å°†ä»£ç ç¼–è¯‘å¹¶ä¸Šä¼ åˆ°å¼€å‘æ¿ä¸­ã€‚ ## é¡¹ç›®ä¸€ WS2812 BPI Bit S2 ä½¿ç”¨25é¢—WS2812å½©ç¯ã€‚ æœ¬é¡¹ç›®æ˜¯ç‚¹äº® BPI Bit S2 çš„RGBå½©ç¯çš„å®éªŒã€‚ ### æ‰€éœ€å…ƒä»¶ BPI Bit S2 ä¸»æ¿ X 1 ![](../assets/images/Bit_S2_500x.png) >æ³¨æ„ï¼šè¯¥é¡¹ç›®ä¸éœ€è¦è¿æ¥å…¶ä»–ä¼ æ„Ÿå™¨ã€‚ ### è¾“å…¥ä»£ç  æ‰“å¼€ Arduino IDEã€‚å°½ç®¡å¯ä»¥ç›´æ¥å¤åˆ¶ä»£ç ï¼Œæˆ‘ä»¬è¿˜æ˜¯å»ºè®®æ‚¨è‡ªå·±æ‰‹åŠ¨è¾“å…¥ä»£ç ç†Ÿæ‚‰ä¸‹ã€‚ ï¼ˆè¿™ä¸ªç¨‹åºéœ€è¦Adafruit_NeoPixelåº“ï¼Œéœ€è¦åœ¨[GitHub](https://github.com/adafruit/Adafruit_NeoPixel)ä¸‹è½½ï¼Œè§£å‹åˆ°Arduino\\ Library æ–‡ä»¶å¤¹ä¸‹ï¼‰ä»£ç å¦‚ä¸‹: <details> <summary>å±•å¼€æŸ¥çœ‹</summary> <pre><code> // NeoPixel Ring simple sketch (c) 2013 Shae Erisson // Released under the GPLv3 license to match the rest of the // Adafruit NeoPixel library #include <Adafruit_NeoPixel.h> #ifdef __AVR__ #include <avr/power.h> // Required for 16 MHz Adafruit Trinket #endif // Which pin on the Arduino is connected to the NeoPixels? #define PIN 18 // On Trinket or Gemma, suggest changing this to 1 // How many NeoPixels are attached to the Arduino? #define NUMPIXELS 25 // Popular NeoPixel ring size // When setting up the NeoPixel library, we tell it how many pixels, // and which pin to use to send signals. Note that for older NeoPixel // strips you might need to change the third parameter see the // strandtest example for more information on possible values. Adafruit_NeoPixel pixels(NUMPIXELS, PIN, NEO_GRB + NEO_KHZ800); #define DELAYVAL 500 // Time (in milliseconds) to pause between pixels void setup() { // These lines are specifically to support the Adafruit Trinket 5V 16 MHz. // Any other board, you can remove this part (but no harm leaving it): #if defined(__AVR_ATtiny85__) && (F_CPU 16000000) clock_prescale_set(clock_div_1); #endif // END of Trinket specific code. pixels.begin(); // INITIALIZE NeoPixel strip object (REQUIRED) } void loop() { pixels.clear(); // Set all pixel colors to 'off' // The first NeoPixel in a strand is #0, second is 1, all the way up // to the count of pixels minus one. for(int i 0; i < NUMPIXELS; i++) { // For each pixel... // pixels.Color() takes RGB values, from 0,0,0 up to 255,255,255 // Here we're using a moderately bright green color: pixels.setPixelColor(i, pixels.Color(25, 25, 25)); pixels.show(); // Send the updated pixel colors to the hardware. delay(DELAYVAL); // Pause before next pass through loop } } </code></pre> </details> è¾“å…¥å®Œæˆåï¼Œç‚¹å‡»â€œç¼–è¯‘â€æ£€æŸ¥ä»£ç æœ‰æ— é”™è¯¯ã€‚ç¡®ä¿æ²¡æœ‰é”™è¯¯åå°±å¯ä»¥å¼€å§‹ä¸Šä¼ äº†ï¼Œç‚¹å‡»â€œä¸Šä¼ â€ä¹‹å IDE ä¼šæŠŠä»£ç å‘é€ç»™ BPI Bit S2 ä¸»æ¿ã€‚å¤ä½åWS2812ç¯ä¼šå¼€å§‹äº®ç»¿ç¯ï¼Œ >æ³¨æ„ï¼šå¦‚æœéœ€è¦å…¶ä»–é¢œè‰²ï¼Œå¯ä»¥ä¿®æ”¹ä»£ç ä¸­çš„RGBå€¼ã€‚ ### ä»£ç åˆ†æ æœ¬é¡¹ç›®ä½¿ç”¨ BPI Bit S2 é›†æˆçš„WS2812ç¯ï¼Œé»˜è®¤GPIOæ˜¯18ã€‚ ``` #define PIN 18 ``` è®¾ç½®GPIOå¼•è„šå· ``` #define NUMPIXELS 25 ``` è®¾ç½®ç¯çš„ä¸ªæ•°ï¼Œå¦‚æœæ‚¨æƒ³è¿æ¥æ›´å¤šWS2812 å½©ç¯ï¼Œå¯ä»¥æ¢ä¸€ä¸ªIOï¼Œå¹¶ä¿®æ”¹ç¯çš„æ•°é‡ã€‚ ## é¡¹ç›®äºŒ è§¦æ‘¸ä¼ æ„Ÿå™¨ BPI Bit S2 æä¾›äº†å¤šè¾¾ 11 ä¸ªå¯ç”¨çš„ç”µå®¹å¼ä¼ æ„Ÿå™¨ GPIOï¼Œèƒ½å¤Ÿæ¢æµ‹ç”±æ‰‹æŒ‡æˆ–å…¶ä»–ç‰©å“ç›´æ¥æ¥è§¦æˆ–æ¥è¿‘è€Œäº§ç”Ÿçš„ç”µå®¹å·®å¼‚ã€‚è¿™ç§ä½å™ªå£°ç‰¹æ€§å’Œç”µè·¯çš„é«˜çµæ•åº¦è®¾è®¡é€‚ç”¨äºè¾ƒå°çš„è§¦æ‘¸æ¿ï¼Œå¯ä»¥ç›´æ¥ç”¨äºè§¦æ‘¸å¼€å…³ã€‚æœ¬é¡¹ç›®é˜è¿°äº†å¦‚ä½•é€šè¿‡Arduino ä»£ç è·å– BPI Bit S2 çš„è§¦æ‘¸ä¼ æ„Ÿå™¨çŠ¶æ€ï¼Œå¹¶æ‰“å°çŠ¶æ€ã€‚ ### æ‰€éœ€å…ƒä»¶ BPI Bit S2 ä¸»æ¿ X 1 ![](../assets/images/Bit_S2_500x.png) >æ³¨æ„ï¼šè¯¥é¡¹ç›®ä¸éœ€è¦è¿æ¥å…¶ä»–ä¼ æ„Ÿå™¨ã€‚ ### è¾“å…¥ä»£ç  æ‰“å¼€ Arduino IDEã€‚å°½ç®¡å¯ä»¥ç›´æ¥å¤åˆ¶ä»£ç ï¼Œæˆ‘ä»¬è¿˜æ˜¯å»ºè®®æ‚¨è‡ªå·±æ‰‹åŠ¨è¾“å…¥ä»£ç ç†Ÿæ‚‰ä¸‹ã€‚ ä»£ç å¦‚ä¸‹: <details> <summary>å±•å¼€æŸ¥çœ‹</summary> <pre><code> void setup() { Serial.begin(115200); delay(1000); // give me time to bring up serial monitor Serial.println(\"BPI Bit S2 Touch Test\"); } void loop(){ Serial.println(touchRead(T2)); // get value using T0 >D9 delay(100); } </code></pre> </details> è¾“å…¥å®Œæˆåï¼Œç‚¹å‡»â€œç¼–è¯‘â€æ£€æŸ¥ä»£ç æœ‰æ— é”™è¯¯ã€‚ç¡®ä¿æ²¡æœ‰é”™è¯¯åå°±å¯ä»¥å¼€å§‹ä¸Šä¼ äº†ï¼Œç‚¹å‡»â€œä¸Šä¼ â€ä¹‹å IDE ä¼šæŠŠä»£ç å‘é€ç»™ BPI Bit S2 ä¸»æ¿ã€‚æ‰“å¼€ Arduino IDE ä¸²å£ç›‘è§†å™¨ï¼Œå¹¶ç”¨æ‰‹è§¦æ‘¸ GPIO2ï¼ˆT2 å¯¹åº”çš„æ˜¯GPIO2ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°ä¼šæ‰“å°å‡ºçš„æ•°æ®çªç„¶å˜å°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ![](../assets/images/Lesson8 1.png) ### ä»£ç åˆ†æ è·å–è§¦æ‘¸ä¼ æ„Ÿå™¨çš„ GPIO çŠ¶æ€ï¼Œåªéœ€è¦è°ƒç”¨ touchRead å‡½æ•°ï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š ``` uint16_t touchRead(uint8_t pin) ``` è¿”å›â€œ0â€è¡¨ç¤ºæ²¡æœ‰è§¦æ‘¸ï¼Œâ€œ1â€è¡¨ç¤ºè§¦æ‘¸ã€‚å…¶ä¸­ pin æ˜¯ T0~T9ï¼Œå¯¹åº”åˆ° BPI Bit S2çš„å¼•è„šå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š ![](../assets/images/bpi_bit_v2_goldfinger.jpg) <table> <tr> </tr> <tr> <td>è§¦æ‘¸ä¼ æ„Ÿå™¨åºå· </td> <td>å¯¹åº”çš„ ESP32 ç¡¬ä»¶ </td> <td>BPI Bit S2</td> </tr> <tr> <td>T1</td> <td>GPIO1</td> <td>P1</td> </tr> <tr> <td>T2 </td> <td>GPIO2 </td> <td>P2</td> </tr> <tr> <td>T3 </td> <td>GPIO3</td> <td>P3</td> </tr> <tr> <td>T4 </td> <td>GPIO4</td> <td>P4</td> </tr> <tr> <td>T5 </td> <td>GPIO5</td> <td>P5</td> </tr> <tr> <td>T6 </td> <td>GPIO6</td> <td>P6</td> </tr> <tr> <td>T7 </td> <td>GPIO7</td> <td>P7</td> </tr> <tr> <td>T8 </td> <td>GPIO8</td> <td>P8</td> </tr> <tr> <td>T9 </td> <td>GPIO9</td> <td>P9</td> </tr> <tr> <td>T10</td> <td>GPIO10</td> <td>P10</td> </tr> <tr> <td>T11</td> <td>GPIO11</td> <td>P11</td> </tr> </table> ## é¡¹ç›®ä¸‰ ä¸²å£å®éªŒ åœ¨æœ€å¼€å§‹çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸Šä¼ äº†ä¸€ä¸ª Blink é—ªçƒç¨‹åºæ¥æµ‹è¯•æ¿å­ä¸Šçš„ LED çŠ¶æ€ç¯ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ UART ä¸²å£ï¼Œæ¯ç§’æ‰“å°ä¸€æ¬¡è®¡æ—¶æ•°æ®ã€‚ ### æ‰€éœ€å…ƒä»¶ BPI Bit S2 ä¸»æ¿ X 1 ![](../assets/images/Bit_S2_500x.png) ### ç¡¬ä»¶è¿æ¥ æ­¤é¡¹ç›®ä¸éœ€è¦å…¶ä»–ä¼ æ„Ÿå™¨ï¼Œæ‰€ä»¥åªéœ€è¦æŠŠBPI Bit S2ç”¨USBè¿åˆ°ç”µè„‘å°±èƒ½ç”¨ã€‚ ### è¾“å…¥ä»£ç  æ‰“å¼€ Arduino IDEã€‚å°½ç®¡å¯ä»¥ç›´æ¥å¤åˆ¶ä»£ç ï¼Œæˆ‘ä»¬è¿˜æ˜¯å»ºè®®æ‚¨è‡ªå·±æ‰‹åŠ¨è¾“å…¥ä»£ç ç†Ÿæ‚‰ä¸‹ã€‚ ä»£ç å¦‚ä¸‹: <details> <summary>å±•å¼€æŸ¥çœ‹</summary> <pre><code> void setup() { Serial.begin(115200); //è®¾ç½®ä¸²å£é€šä¿¡æ³¢ç‰¹ç‡ } void loop() { static unsigned long i 0; //å®šä¹‰å˜é‡i Serial.println(i++); //iåŠ ä¸€åè¾“å‡ºi delay(1000); //å»¶æ—¶1ç§’ } </code></pre> </details> è¾“å…¥å®Œæˆåï¼Œç‚¹å‡»â€œç¼–è¯‘â€æ£€æŸ¥ä»£ç æœ‰æ— é”™è¯¯ã€‚ç¡®ä¿æ²¡æœ‰é”™è¯¯åå°±å¯ä»¥å¼€å§‹ä¸Šä¼ äº†ï¼Œç‚¹å‡»â€œä¸Šä¼ â€ä¹‹å IDE ä¼šæŠŠä»£ç å‘é€ç»™ BPI Bit S2 ä¸»æ¿ã€‚ä¸Šä¼ å®Œæˆä¹‹åï¼Œä½ éœ€è¦æŒ‰ä¸€ä¸‹å¤ä½é”®ï¼Œè¿™æ ·ä»£ç å°±èƒ½æ­£å¸¸è¿è¡Œäº† ### å®éªŒç°è±¡ å®Œæˆä¹‹å‰æ­¥éª¤çš„ä¸Šä¼ åï¼Œæ‰“å¼€ Arduino IDE è‡ªå¸¦çš„ä¸²å£ç›‘è§†å™¨ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„æ‰“å°ä¿¡æ¯ï¼š ![](../assets/images/Lesson1 1.png) ## é¡¹ç›®å›› PWM(å‘¼å¸ç¯) å‘¼å¸ç¯ï¼Œå³è®© BPI Bit S2 é€šè¿‡ PWM é©±åŠ¨ LED ç¯ï¼Œå®ç° LED çš„äº®åº¦æ¸å˜ï¼Œçœ‹èµ·æ¥å°±åƒæ˜¯åœ¨å‘¼å¸ä¸€æ ·ã€‚å…³äº PWM çš„è§£é‡Šï¼Œè¯·é˜…è§ˆçŸ¥è¯†æ‰©å±•éƒ¨åˆ†ã€‚ ### æ‰€éœ€å…ƒä»¶ BPI Bit S2 ä¸»æ¿ X 1 ![](../assets/images/Bit_S2_500x.png) LED X 1 (å»ºè®®ä¸²è”ä¸€ä¸ªç”µé˜»é™æµ) ![](../assets/images/led.png) ### ç¡¬ä»¶è¿æ¥ å°†LEDè¿æ¥åˆ°BPI Bit S2çš„GPIO17å°±å¯ä»¥äº†ï¼Œé•¿çš„é‚£ä¸ªè„šæ¥GPIO17ï¼ŒçŸ­çš„æ¥åˆ°GND ### è¾“å…¥ä»£ç  æ‰“å¼€ Arduino IDEã€‚å°½ç®¡å¯ä»¥ç›´æ¥å¤åˆ¶ä»£ç ï¼Œæˆ‘ä»¬è¿˜æ˜¯å»ºè®®æ‚¨è‡ªå·±æ‰‹åŠ¨è¾“å…¥ä»£ç ç†Ÿæ‚‰ä¸‹ã€‚ ä»£ç å¦‚ä¸‹: <details> <summary>å±•å¼€æŸ¥çœ‹</summary> <pre><code> #define LED_CHANNEL_0 0 //è®¾ç½®é€šé“0 #define LED_TIMER_13_BIT 13 //è®¾ç½®13ä½å®šæ—¶å™¨ #define LED_BASE_FREQ 5000 //è®¾ç½®å®šæ—¶å™¨é¢‘ç‡ä½5000Hz #define LED_PIN 13 //è®¾ç½®LEDç¯ int brightness 0; // LEDäº®åº¦ int fadeAmount 1; // LEDæ•°é‡ //è®¾ç½®ledç¯çš„äº®åº¦ void ledcAnalogWrite(uint32_t value, uint32_t valueMax 255) { //è®¡ç®—å ç©ºæ¯” uint32_t duty (LED_BASE_FREQ / valueMax) * min(value, valueMax); //è®¾ç½®å ç©ºæ¯” ledcWrite(LED_CHANNEL_0, duty); } void setup() { ledcSetup(LED_CHANNEL_0, LED_BASE_FREQ, LED_TIMER_13_BIT); ledcAttachPin(LED_PIN, LED_CHANNEL_0); } void loop() { ledcAnalogWrite(brightness); brightness + fadeAmount; if (brightness < 0 brightness > 255) { fadeAmount fadeAmount; } delay(30); } </code></pre> </details> è¾“å…¥å®Œæˆåï¼Œç‚¹å‡»â€œç¼–è¯‘â€æŒ‰é’®æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰é”™è¯¯ã€‚ç¡®å®šæ²¡æœ‰é”™è¯¯åå¯ä»¥å¼€å§‹ä¸Šä¼ äº†ï¼Œç‚¹å‡»â€œä¸Šä¼ â€æŒ‰é’® ã€‚IDE ä¼šæŠŠä»£ç å‘é€ç»™ BPI Bit S2 ä¸»æ¿ã€‚ä¸Šä¼ å®Œæˆåæ‚¨å°±å¯ä»¥çœ‹è§Type Cæ—è¾¹çš„LED ç¯å¼€å§‹â€œå‘¼å¸â€äº†ï¼ ç°åœ¨è®©æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ä»£ç å’Œç¡¬ä»¶ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œã€‚ ### çŸ¥è¯†å­¦ä¹  ä»€ä¹ˆæ˜¯ PWM æ§åˆ¶ä¿¡å·ï¼Ÿ PWMï¼ˆpulse width modulationï¼‰è„‰å†²å®½åº¦è°ƒåˆ¶ï¼ŒMCUï¼ˆå¾®æ§åˆ¶å™¨ï¼‰é€šè¿‡å¯¹å¼€å…³å™¨ä»¶çš„é€šæ–­è¿›è¡Œæ§åˆ¶ï¼Œä½¿è¾“å‡ºç«¯å¾—åˆ°ä¸€ç³»åˆ—å¹…å€¼ç›¸ç­‰çš„è„‰å†²ï¼Œç”¨è¿™äº›è„‰å†²æ¥ä»£æ›¿æ­£å¼¦æ³¢æˆ–æ‰€éœ€çš„æ³¢å½¢ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ![](../assets/images/Lesson2 1.jpg) å…¶ä¸­ï¼ŒtON æ˜¯é«˜ç”µå¹³æŒç»­æ—¶é—´ï¼ŒtPWM æ˜¯ PWM æ³¢çš„å‘¨æœŸï¼ŒtPWM tON æ˜¯ä½ç”µå¹³æŒç»­æ—¶é—´ï¼Œå ç©ºæ¯”æ˜¯æŒ‡é«˜ç”µå¹³æŒç»­æ—¶é—´å æ•´ä¸ªå‘¨æœŸçš„æ¯”ä¾‹ï¼Œå³ D ton/tPWM ã€‚ ### ä»£ç åˆ†æ BPI Bit S2 çš„ PWM æ¯”æ™®é€šçš„ Arduino UNO é«˜çº§çš„å¤šï¼Œè®¾ç½®ä¸Šä¸èƒ½ç®€å•çš„ä½¿ç”¨analogWrite å‡½æ•°æ¥é©±åŠ¨ PWMï¼Œè€Œæ˜¯éœ€è¦è®¾ç½® timer å‡½æ•°ï¼Œä»¥åŠç›¸å…³çš„é¢‘ç‡å‚æ•°ç­‰æ‰èƒ½å·¥ä½œã€‚ ``` #define LEDC_CHANNEL_0 0 ``` å®šä¹‰äº†å®šæ—¶å™¨ä½¿ç”¨çš„é€šé“ï¼ŒBPI Bit S2 æ€»å…±æœ‰ 16 ä¸ªé€šé“ï¼Œè¿™é‡Œç”¨çš„æ˜¯é€šé“ 0ã€‚ ``` #define LEDC_TIMER_13_BIT 13 ``` å®šä¹‰äº†å®šæ—¶å™¨ä¸º 13 ä½å®šæ—¶å™¨ï¼Œå³å®šæ—¶å™¨æœ€å¤§è®¡æ•°ä¸º 2 çš„ 13 æ¬¡æ–¹ã€‚ ``` #define LEDC_BASE_FREQ 5000 ``` è¿™æ˜¯è®¾ç½®å®šæ—¶å™¨çš„é¢‘ç‡ï¼Œå•ä½æ˜¯ Hzã€‚æ¥ä¸‹æ¥çš„ brightness å’Œ fadeAmount å‚æ•°åˆ†åˆ«è¡¨ç¤º PWM çš„å ç©ºæ¯”å’Œæ¯æ¬¡å˜åŒ–çš„æ•°å€¼ã€‚ ``` void ledcAnalogWrite(uint32_t value, uint32_t valueMax 255) ``` è¿™ä¸ªå‡½æ•°æ˜¯è®¡ç®— PWM å ç©ºæ¯”å’Œè®¾ç½® PWM å ç©ºæ¯”ï¼Œç±»ä¼¼ Arduino çš„ analogWrite å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œä¼ é€’å‚æ•°çš„æœ€å¤§å€¼æ˜¯ 255ï¼Œè¿™æ˜¯ä¸ºäº†å’Œ analogWrite å…¼å®¹ã€‚ ``` ledcSetup(LEDC_CHANNEL_0, LEDC_BASE_FREQ, LEDC_TIMER_13_BIT); \t ledcAttachPin(LED_PIN, LEDC_CHANNEL_0); ``` è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯ BPI Bit S2 å®šæ—¶å™¨è®¾ç½®å‡½æ•°ï¼Œå‡½æ•°åŸå‹åŠåŸç†è¿™é‡Œä¸è®²è¿°ï¼Œå¦‚æœæ‚¨æ„Ÿå…´è¶£å¯ä»¥çœ‹çœ‹åº•å±‚æºç ï¼ˆæºç åœ°å€ï¼šC:\\Users\\â€œyour PCâ€\\AppData\\Local\\Arduino15\\packages\\esp32\\ hardware\\ adafruit_metro_esp32s2 \\0.0.3\\libraries\\ESP32\\ï¼‰ï¼Œè¿™é‡Œåªéœ€è¦çŸ¥é“æ€ä¹ˆç”¨è¿™äº›å‡½æ•°æ¥è®¾ç½®ç›¸å…³çš„ timer å°±å¯ä»¥äº†ã€‚ å…³äºä»€ä¹ˆæ˜¯ PWM ä¿¡å·ï¼Œåœ¨å‰é¢å·²ç»é˜è¿°è¿‡äº†ï¼Œè¿™é‡Œä¸å†è¯´æ˜ã€‚ >æ³¨æ„ï¼šBPI Bit S2 çš„ä»»ä½•å¼•è„šéƒ½å¯ä»¥é…ç½®æˆ PWM è¾“å‡ºï¼Œæ‚¨å¯ä»¥å°è¯•ç€ä¿®æ”¹ä»£ç ï¼Œå®Œæˆæ‚¨çš„é¡¹ç›®ã€‚ ## é¡¹ç›®äº” ADC ADCï¼ˆæ¨¡æ•°è½¬æ¢å™¨å³ A/D è½¬æ¢å™¨ï¼‰ï¼Œæ˜¯æŒ‡å°†æ¨¡æ‹Ÿä¿¡å·è½¬å˜æˆæ•°å­—ä¿¡å·ã€‚BPI Bit S2 çš„ADC æ˜¯13ä½çš„ï¼Œæœ€å¤§è¾“å‡ºå€¼ä¸º 8191ï¼Œè€Œ Arduino UNO æ˜¯ 10 ä½çš„ï¼Œæœ€å¤§è¾“å‡ºå€¼æ˜¯ 1023ï¼Œå› æ­¤ï¼Œåœ¨ç²¾åº¦ä¸Šæ¯”Arduino UNO è¦é«˜ï¼Œè€Œä¸”è½¬æ¢é€Ÿç‡å¿«ï¼Œä¸”åœ¨ä½¿ç”¨ä¸Šå…¼å®¹ Arduino analogRead å‡½æ•°ï¼Œç›´æ¥è¯»å–å³å¯ã€‚ ### æ‰€éœ€å…ƒä»¶ æ¨¡æ‹Ÿè§’åº¦ä¼ æ„Ÿå™¨ X 1 ![](../assets/images/Lesson3 1.png) é¢åŒ…æ¿ X 1 ![](../assets/images/Lesson3 2.png) BPI Bit S2 ä¸»æ¿ X 1 ![](../assets/images/Bit_S2_500x.png) ### ç¡¬ä»¶è¿æ¥ æŠŠ ç”µä½è®¡æ’æ¥åˆ° BPI Bit S2 ä¸»æ¿ä¸Šï¼Œç„¶åå°†æ¨¡æ‹Ÿè§’åº¦ä¼ æ„Ÿå™¨æ’æ¥åˆ° IO2ï¼ˆå®éªŒä¸­ç”¨çš„æ˜¯IO2ï¼‰ã€‚ å…ƒä»¶è¿æ¥å¥½åï¼Œä½¿ç”¨ USB çº¿è¿æ¥ BPI Bit S2 å’Œç”µè„‘ã€‚ ### è¾“å…¥ä»£ç  æ‰“å¼€ Arduino IDEã€‚å°½ç®¡å¯ä»¥ç›´æ¥å¤åˆ¶ä»£ç ï¼Œæˆ‘ä»¬è¿˜æ˜¯å»ºè®®æ‚¨è‡ªå·±æ‰‹åŠ¨è¾“å…¥ä»£ç ç†Ÿæ‚‰ä¸‹ã€‚ä»£ç å¦‚ä¸‹: <details> <summary>å±•å¼€æŸ¥çœ‹</summary> <pre><code> void setup() { // put your setup code here, to run once: Serial.begin(115200); } void loop() { // put your main code here, to run repeatedly: Serial.println(analogRead(2)); delay(100); } </code></pre> </details> è¾“å…¥å®Œæˆåï¼Œç‚¹å‡»â€œç¼–è¯‘â€æ£€æŸ¥ä»£ç æœ‰æ— é”™è¯¯ã€‚ç¡®ä¿æ²¡æœ‰é”™è¯¯åå°±å¯ä»¥å¼€å§‹ä¸Šä¼ äº†ï¼Œç‚¹å‡»â€œä¸Šä¼ â€ä¹‹åIDE ä¼šæŠŠä»£ç å‘é€ç»™ BPI Bit S2 ä¸»æ¿ã€‚ä¸Šä¼ å®Œæˆåï¼Œæ‰“å¼€ Arduino IDE çš„ä¸²å£ç›‘è§†å™¨ï¼Œæ—‹è½¬æ¨¡æ‹Ÿè§’åº¦ä¼ æ„Ÿå™¨ï¼Œå¯ä»¥çœ‹åˆ°ä¸²å£ç›‘è§†å™¨ä¸­çš„æ•°å€¼å˜åŒ–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ![](../assets/images/Lesson3 3.png) ### ä»£ç åˆ†æ ç”±äºBPI Bit S2 çš„ ADC åœ¨ä½¿ç”¨ä¸Šå®Œå…¨å…¼å®¹ Arduinoï¼Œå› æ­¤è¿™é‡Œä¸å†å¯¹analogRead å‡½æ•°è¿›è¡Œè¿‡å¤šçš„è®²è§£ã€‚ æ³¨æ„ï¼šå¦‚æœæ‚¨å¯¹ Arduino çš„åŸºæœ¬å‡½æ•°ä¸æ˜¯ç‰¹åˆ«ç†Ÿæ‚‰ï¼Œæ‚¨å¯ä»¥[ç‚¹å‡»é“¾æ¥](https://www.arduino.cc/en/Tutorial/BuiltInExamples)è¿›è¡Œå­¦ä¹ ã€‚ ## é¡¹ç›®å…­ I2C BPI Bit S2 çš„ I2C å¯ä»¥é…ç½®åˆ°ä»»æ„ I/O å£ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä¼ é€’ç›¸å…³å‚æ•°è¿›è¡Œé…ç½®ã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬å·²ç»å°† I2C è¿›è¡Œäº†é»˜è®¤é…ç½®ï¼Œåœ¨ä½¿ç”¨ä¸Šå®Œå…¨å…¼å®¹ Arduinoï¼Œé»˜è®¤é…ç½®å¼•è„šå¯ä»¥åœ¨ç¬¬ä¸€ç« ç®€ä»‹ä¸­æŸ¥çœ‹åˆ°ã€‚æœ¬é¡¹ç›®æ˜¯åŸºäº I2C é»˜è®¤é…ç½®ï¼Œé©±åŠ¨ OLED æ˜¾ç¤ºå±ã€‚ æ‰€éœ€å…ƒä»¶ I2C OLED 12864 æ˜¾ç¤ºå± X 1 ![](../assets/images/Lesson4 1.png) é¢åŒ…æ¿ X 1 ![](../assets/images/Lesson3 2.png) BPI Bit S2 ä¸»æ¿ X 1 ![](../assets/images/Bit_S2_500x.png) ### ç¡¬ä»¶è¿æ¥ æŠŠBPI Bit S2 ä¸»æ¿æ’åˆ°é¢åŒ…æ¿ä¸Šï¼Œç„¶åå°† OLEDæ˜¾ç¤ºå±æ’æ¥åˆ° I2C æ¥å£ã€‚ï¼ˆSDAæ˜¯33ï¼ŒSCLæ˜¯34ï¼‰å…ƒä»¶è¿æ¥å¥½åï¼Œä½¿ç”¨ USB çº¿è¿æ¥ BPI Bit S2 å’Œç”µè„‘ã€‚ ### è¾“å…¥ä»£ç  æ‰“å¼€ Arduino IDEã€‚å°½ç®¡å¯ä»¥ç›´æ¥å¤åˆ¶ä»£ç ï¼Œæˆ‘ä»¬è¿˜æ˜¯å»ºè®®æ‚¨è‡ªå·±æ‰‹åŠ¨è¾“å…¥ä»£ç ç†Ÿæ‚‰ä¸‹ã€‚ä»£ç å¦‚ä¸‹: <details> <summary>å±•å¼€æŸ¥çœ‹</summary> <pre><code> #include <Wire.h> int UG2864Address 0x3C;//OLED UG2864å™¨ä»¶7ä½åœ°å€ prog_char F8X16[][16] PROGMEM { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// 0 0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x30,0x00,0x00,0x00,//!1 0x00,0x10,0x0C,0x06,0x10,0x0C,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//\"2 0x40,0xC0,0x78,0x40,0xC0,0x78,0x40,0x00,0x04,0x3F,0x04,0x04,0x3F,0x04,0x04,0x00,//#3 0x00,0x70,0x88,0xFC,0x08,0x30,0x00,0x00,0x00,0x18,0x20,0xFF,0x21,0x1E,0x00,0x00,//$4 0xF0,0x08,0xF0,0x00,0xE0,0x18,0x00,0x00,0x00,0x21,0x1C,0x03,0x1E,0x21,0x1E,0x00,//%5 0x00,0xF0,0x08,0x88,0x70,0x00,0x00,0x00,0x1E,0x21,0x23,0x24,0x19,0x27,0x21,0x10,//&6 0x10,0x16,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//'7 0x00,0x00,0x00,0xE0,0x18,0x04,0x02,0x00,0x00,0x00,0x00,0x07,0x18,0x20,0x40,0x00,//(8 0x00,0x02,0x04,0x18,0xE0,0x00,0x00,0x00,0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00,//)9 0x40,0x40,0x80,0xF0,0x80,0x40,0x40,0x00,0x02,0x02,0x01,0x0F,0x01,0x02,0x02,0x00,//*10 0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x1F,0x01,0x01,0x01,0x00,//+11 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xB0,0x70,0x00,0x00,0x00,0x00,0x00,//,12 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01,// 13 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00,//.14 0x00,0x00,0x00,0x00,0x80,0x60,0x18,0x04,0x00,0x60,0x18,0x06,0x01,0x00,0x00,0x00,///15 0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,//016 0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//117 0x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,//218 0x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00,//319 0x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00,//420 0x00,0xF8,0x08,0x88,0x88,0x08,0x08,0x00,0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00,//521 0x00,0xE0,0x10,0x88,0x88,0x18,0x00,0x00,0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00,//622 0x00,0x38,0x08,0x08,0xC8,0x38,0x08,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,//723 0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00,//824 0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x00,0x31,0x22,0x22,0x11,0x0F,0x00,//925 0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,//:26 0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x00,0x00,0x00,0x00,//;27 0x00,0x00,0x80,0x40,0x20,0x10,0x08,0x00,0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x00,//<28 0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00,// 29 0x00,0x08,0x10,0x20,0x40,0x80,0x00,0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,0x00,//>30 0x00,0x70,0x48,0x08,0x08,0x08,0xF0,0x00,0x00,0x00,0x00,0x30,0x36,0x01,0x00,0x00,//?31 0xC0,0x30,0xC8,0x28,0xE8,0x10,0xE0,0x00,0x07,0x18,0x27,0x24,0x23,0x14,0x0B,0x00,//@32 0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20,//A33 0x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00,//B34 0xC0,0x30,0x08,0x08,0x08,0x08,0x38,0x00,0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00,//C35 0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00,//D36 0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00,//E37 0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x00,0x03,0x00,0x00,0x00,//F38 0xC0,0x30,0x08,0x08,0x08,0x38,0x00,0x00,0x07,0x18,0x20,0x20,0x22,0x1E,0x02,0x00,//G39 0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x20,0x3F,0x21,0x01,0x01,0x21,0x3F,0x20,//H40 0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//I41 0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,0x00,//J42 0x08,0xF8,0x88,0xC0,0x28,0x18,0x08,0x00,0x20,0x3F,0x20,0x01,0x26,0x38,0x20,0x00,//K43 0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00,//L44 0x08,0xF8,0xF8,0x00,0xF8,0xF8,0x08,0x00,0x20,0x3F,0x00,0x3F,0x00,0x3F,0x20,0x00,//M45 0x08,0xF8,0x30,0xC0,0x00,0x08,0xF8,0x08,0x20,0x3F,0x20,0x00,0x07,0x18,0x3F,0x00,//N46 0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00,//O47 0x08,0xF8,0x08,0x08,0x08,0x08,0xF0,0x00,0x20,0x3F,0x21,0x01,0x01,0x01,0x00,0x00,//P48 0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x18,0x24,0x24,0x38,0x50,0x4F,0x00,//Q49 0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20,//R50 0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00,//S51 0x18,0x08,0x08,0xF8,0x08,0x08,0x18,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,//T52 0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00,//U53 0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00,//V54 0xF8,0x08,0x00,0xF8,0x00,0x08,0xF8,0x00,0x03,0x3C,0x07,0x00,0x07,0x3C,0x03,0x00,//W55 0x08,0x18,0x68,0x80,0x80,0x68,0x18,0x08,0x20,0x30,0x2C,0x03,0x03,0x2C,0x30,0x20,//X56 0x08,0x38,0xC8,0x00,0xC8,0x38,0x08,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,//Y57 0x10,0x08,0x08,0x08,0xC8,0x38,0x08,0x00,0x20,0x38,0x26,0x21,0x20,0x20,0x18,0x00,//Z58 0x00,0x00,0x00,0xFE,0x02,0x02,0x02,0x00,0x00,0x00,0x00,0x7F,0x40,0x40,0x40,0x00,//[59 0x00,0x0C,0x30,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x38,0xC0,0x00,//\\60 0x00,0x02,0x02,0x02,0xFE,0x00,0x00,0x00,0x00,0x40,0x40,0x40,0x7F,0x00,0x00,0x00,//]61 0x00,0x00,0x04,0x02,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//^62 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,//_63 0x00,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//`64 0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20,//a65 0x08,0xF8,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x3F,0x11,0x20,0x20,0x11,0x0E,0x00,//b66 0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x0E,0x11,0x20,0x20,0x20,0x11,0x00,//c67 0x00,0x00,0x00,0x80,0x80,0x88,0xF8,0x00,0x00,0x0E,0x11,0x20,0x20,0x10,0x3F,0x20,//d68 0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00,//e69 0x00,0x80,0x80,0xF0,0x88,0x88,0x88,0x18,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//f70 0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x6B,0x94,0x94,0x94,0x93,0x60,0x00,//g71 0x08,0xF8,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,//h72 0x00,0x80,0x98,0x98,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//i73 0x00,0x00,0x00,0x80,0x98,0x98,0x00,0x00,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,//j74 0x08,0xF8,0x00,0x00,0x80,0x80,0x80,0x00,0x20,0x3F,0x24,0x02,0x2D,0x30,0x20,0x00,//k75 0x00,0x08,0x08,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//l76 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x20,0x3F,0x20,0x00,0x3F,0x20,0x00,0x3F,//m77 0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,//n78 0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00,//o79 0x80,0x80,0x00,0x80,0x80,0x00,0x00,0x00,0x80,0xFF,0xA1,0x20,0x20,0x11,0x0E,0x00,//p80 0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x0E,0x11,0x20,0x20,0xA0,0xFF,0x80,//q81 0x80,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x20,0x20,0x3F,0x21,0x20,0x00,0x01,0x00,//r82 0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x33,0x24,0x24,0x24,0x24,0x19,0x00,//s83 0x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00,//t84 0x80,0x80,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x1F,0x20,0x20,0x20,0x10,0x3F,0x20,//u85 0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x00,0x01,0x0E,0x30,0x08,0x06,0x01,0x00,//v86 0x80,0x80,0x00,0x80,0x00,0x80,0x80,0x80,0x0F,0x30,0x0C,0x03,0x0C,0x30,0x0F,0x00,//w87 0x00,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x31,0x2E,0x0E,0x31,0x20,0x00,//x88 0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x80,0x81,0x8E,0x70,0x18,0x06,0x01,0x00,//y89 0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x21,0x30,0x2C,0x22,0x21,0x30,0x00,//z90 0x00,0x00,0x00,0x00,0x80,0x7C,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x3F,0x40,0x40,//{91 0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,//92 0x00,0x02,0x02,0x7C,0x80,0x00,0x00,0x00,0x00,0x40,0x40,0x3F,0x00,0x00,0x00,0x00,//}93 0x00,0x06,0x01,0x01,0x02,0x02,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//~94 }; char ch_buf[17] {0}; int RES 6;//Gadgeteer PIN6 int DC 7;//Gadgeteer PIN3 void Writec(unsigned char COM) { Wire.beginTransmission(UG2864Address); Wire.write(0x00); Wire.write(COM); Wire.endTransmission(); } void Writed(unsigned char DATA) { Wire.beginTransmission(UG2864Address); Wire.write(0x40); Wire.write(DATA); Wire.endTransmission(); } void SSD1306() { Writec(0XAE);//display off Writec(0X00);//set lower column address Writec(0X10);//set higher column address Writec(0X40);//set display start line Writec(0XB0);//set page address Writec(0X81);//set contract control Writec(0XCF);// VCC Generated by Internal DC/DC Circuit Writec(0XA0);//set segment remap column address 127 is mapped to SEG0 Writec(0XA6);//normal / reverse normal display Writec(0XA8);//multiplex ratio Writec(0X3F);//1/64 Writec(0XC0);//Com scan direction remapped mode. Scan from COM[N 1] to COM0 Writec(0XD3);//set display offset Writec(0X00); Writec(0XD5);//set osc division Writec(0X80); Writec(0XD9);//set pre charge period Writec(0X11); Writec(0XDa);//set COM pins Writec(0X12); Writec(0X8d);/*set charge pump enable*/ Writec(0X14); Writec(0Xdb);//Set VcomH Writec(0X20); Writec(0XAF);//display ON } void fill(unsigned char dat) { unsigned char i,j; Writec(0x00);//set lower column address Writec(0x10);//set higher column address Writec(0xB0);//set page address for(j 0;j<8;j++) { Writec(0xB0+j);//set page address Writec(0x00);//set lower column address Writec(0x10);//set higher column address for(i 0;i<128;i++) { Writed(dat); } } } void show_string(unsigned char x,unsigned char y,char *s) { unsigned char i,j,lower,higher; char *t; t s; lower y%16; higher y/16; if((x>3) (y>120)) return; Writec(0xB0+x*2);//set page address Writec(lower);//set lower column address Writec(0x10+higher);//set higher column address for(j 0;*s! '\\0';j++) { for(i 0;i<8;i++){ ch_buf[i] pgm_read_word(&F8X16[*s 32][i]); } for(i 0;i<8;i++) Writed(ch_buf[i]); s++; } Writec(0xB0+x*2+1);//set page address Writec(lower);//set lower column address Writec(0x10+higher);//set higher column address s t; for(j 0;*s! '\\0';j++) { for(i 0;i<8;i++){ ch_buf[i] pgm_read_word(&F8X16[*s 32][i+8]); } for(i 0;i<8;i++) Writed(ch_buf[i]); s++; } } void oled_init(void) { pinMode(RES,OUTPUT);//RES pinMode(DC,OUTPUT);//D/C# digitalWrite(DC,LOW); Wire.begin(); digitalWrite(RES,HIGH); delay(100); digitalWrite(RES,LOW); delay(100); digitalWrite(RES,HIGH); delay(100); SSD1306(); fill(0x00); } void setup() { oled_init(); } void loop() { fill(0x00); show_string(0,12,\"BananaPi\"); show_string(2,12,\"banana pi.org\"); while(1); } </code></pre> </details> è¾“å…¥å®Œæˆåï¼Œç‚¹å‡»â€œç¼–è¯‘â€æ£€æŸ¥ä»£ç æœ‰æ— é”™è¯¯ã€‚ç¡®ä¿æ²¡æœ‰é”™è¯¯åå°±å¯ä»¥å¼€å§‹ä¸Šä¼ äº†ï¼Œç‚¹å‡»â€œä¸Šä¼ â€ä¹‹å IDE \tä¼šæŠŠä»£ç å‘é€ç»™ BPI Bit S2 ä¸»æ¿ã€‚ä¸Šä¼ å®Œæˆåï¼ŒOLED æ˜¾ç¤ºå±ä¼šæ˜¾ç¤ºâ€œBananaPi banana pi.orgâ€å­—æ ·ã€‚ ### ä»£ç åˆ†æ æœ¬é¡¹ç›®çš„ä»£ç ç›¸å¯¹äºå‰é¢çš„é¡¹ç›®è¾ƒå¤šï¼Œä¸»è¦æ˜¯åŸºäº I2C é€šä¿¡å¯¹ OLED æ˜¾ç¤ºå±åº•å±‚å¯„å­˜å™¨çš„ç›´æ¥é©±åŠ¨ã€‚ ``` void Writec(unsigned char COM) ``` è®¾ç½®å¯„å­˜å™¨å‡½æ•°ï¼Œé€šè¿‡ I2C å¯¹ OLED æ˜¾ç¤ºå±è®¾ç½®ï¼ŒI2C ä½¿ç”¨æ–¹æ³•å®Œå…¨å…¼å®¹ Arduinoã€‚ ``` void Writed(unsigned char DATA) ``` å†™æ•°æ®å‡½æ•°ï¼ŒI2C ä½¿ç”¨æ–¹æ³•å®Œå…¨å…¼å®¹ Arduinoã€‚ >æ³¨æ„ï¼šBPI Bit S2 çš„ I2C ä¸ Arduino å®Œå…¨å…¼å®¹ï¼Œä¸»è¦æ˜¯è°ƒç”¨ Wire åº“æ–‡ä»¶ä½¿ç”¨ã€‚ ## é¡¹ç›®ä¸ƒ SPI åœ¨å¾ˆå¤šä¼ æ„Ÿå™¨ä¸­ï¼Œéƒ½ä½¿ç”¨ SPI é€šä¿¡ï¼Œå› ä¸º SPI é€šä¿¡é€Ÿç‡ç›¸å¯¹äº I2C æ›´å¿«ï¼Œæ²¡æœ‰åœ°å€å†²çªçš„å¼Šç«¯ã€‚SPIï¼Œæ˜¯ ä¸€ç§é«˜é€Ÿçš„ã€å…¨åŒå·¥ã€åŒæ­¥çš„é€šä¿¡æ€»çº¿ï¼Œè€Œ BPI Bit S2 çš„ SPI å¯ä»¥é…ç½®åˆ°æ‰€æœ‰ I/Oï¼Œæ‚¨å¯ä»¥é˜…è§ˆåº•å±‚ ä»£ç è¿›è¡Œä½¿ç”¨ï¼ˆåˆå­¦è€…ä¸å»ºè®®ä½¿ç”¨ï¼‰ã€‚ä¸ºäº†æ›´å¥½çš„ä½¿ç”¨ä½“éªŒï¼ŒBPI Bit S2 é»˜è®¤æƒ…å†µä¸‹é…ç½®äº†IO35ã€IO36ã€IO37 ä¸º SPI å£ï¼Œåœ¨ä½¿ç”¨ä¸Šåˆ™å®Œå…¨å…¼å®¹ Arduinoã€‚ æœ¬é¡¹ç›®ä½¿ç”¨ BPI Bit S2ï¼Œé€šè¿‡ SPI è¯»å– BME280 æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨çš„æ•°æ®ï¼Œç¤ºä¾‹ä¸­ä½¿ç”¨çš„æ˜¯BME280 åº“æ–‡ä»¶ï¼Œå…³äº SPI é©±åŠ¨æ‚¨å¯ä»¥é˜…è§ˆ BEM280 åº“æ–‡ä»¶ï¼Œ[ç‚¹å‡»é“¾æ¥](https://github.com/DFRobot/DFRobot_BME280)ä¸‹è½½ BME280 åº“æ–‡ä»¶ã€‚ ### æ‰€éœ€å…ƒä»¶ BME280 æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ X 1 ![](../assets/images/Lesson5 1.png) >æ³¨æ„ï¼šBME280 ä¼ æ„Ÿå™¨æœ¬èº«æ”¯æŒ I2C å’Œ SPI é€šä¿¡ï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨ SPI é€šä¿¡ã€‚ é¢åŒ…æ¿ X 1 ![](../assets/images/Lesson3 2.png) BPI Bit S2 ä¸»æ¿ X 1 ![](../assets/images/Bit_S2_500x.png) ### è¾“å…¥ä»£ç  æ‰“å¼€ Arduino IDEã€‚å°½ç®¡å¯ä»¥ç›´æ¥å¤åˆ¶ä»£ç ï¼Œæˆ‘ä»¬è¿˜æ˜¯å»ºè®®æ‚¨è‡ªå·±æ‰‹åŠ¨è¾“å…¥ä»£ç ç†Ÿæ‚‰ä¸‹ã€‚ ï¼ˆè¿™ä¸ªç¨‹åºéœ€è¦DFRobot_BME280åº“ï¼Œéœ€è¦åœ¨[GitHub](https://github.com/DFRobot/DFRobot_BME280)ä¸‹è½½ï¼Œè§£å‹åˆ°Arduino\\ Library æ–‡ä»¶å¤¹ä¸‹ ï¼‰ä»£ç å¦‚ä¸‹ï¼š <details> <summary>å±•å¼€æŸ¥çœ‹</summary> <pre><code> /*! * read_data_spi.ino * * Download this demo to test read data from bme280, connect sensor through spi interface * Connect cs pin to io 2 * Data will print on your serial monitor * * Copyright [DFRobot](http://www.dfrobot.com), 2016 * Copyright GNU Lesser General Public License * * version V1.0 * date 12/03/2019 */ #include \"DFRobot_BME280.h\" #include \"Wire.h\" typedef DFRobot_BME280_SPI BME; // ******** use abbreviations instead of full names ******** # define PIN_CS 2 BME bme(&SPI, PIN_CS); // select TwoWire peripheral and set cs pin id #define SEA_LEVEL_PRESSURE 1015.0f // show last sensor operate status void printLastOperateStatus(BME::eStatus_t eStatus) { switch(eStatus) { case BME::eStatusOK: Serial.println(\"everything ok\"); break; case BME::eStatusErr: Serial.println(\"unknow error\"); break; case BME::eStatusErrDeviceNotDetected: Serial.println(\"device not detected\"); break; case BME::eStatusErrParameter: Serial.println(\"parameter error\"); break; default: Serial.println(\"unknow status\"); break; } } void setup() { Serial.begin(115200); bme.reset(); Serial.println(\"bme read data test\"); while(bme.begin() ! BME::eStatusOK) { Serial.println(\"bme begin faild\"); printLastOperateStatus(bme.lastOperateStatus); delay(2000); } Serial.println(\"bme begin success\"); delay(100); } void loop() { float temp bme.getTemperature(); uint32_t press bme.getPressure(); float alti bme.calAltitude(SEA_LEVEL_PRESSURE, press); float humi bme.getHumidity(); Serial.println(); Serial.println(\" start print \"); Serial.print(\"temperature (unit Celsius): \"); Serial.println(temp); Serial.print(\"pressure (unit pa): \"); Serial.println(press); Serial.print(\"altitude (unit meter): \"); Serial.println(alti); Serial.print(\"humidity (unit percent): \"); Serial.println(humi); Serial.println(\" end print \"); delay(1000); } </code></pre> </details> è¾“å…¥å®Œæˆåï¼Œç‚¹å‡»â€œç¼–è¯‘â€æ£€æŸ¥ä»£ç æœ‰æ— é”™è¯¯ã€‚ç¡®ä¿æ²¡æœ‰é”™è¯¯åå°±å¯ä»¥å¼€å§‹ä¸Šä¼ äº†ï¼Œç‚¹å‡»â€œä¸Šä¼ â€ä¹‹å IDE ä¼šæŠŠä»£ç å‘é€ç»™ BPI Bit S2 ä¸»æ¿ã€‚æ‰“å¼€ Arduino ä¸²å£ç›‘è§†å™¨ï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°ä¿¡æ¯å¦‚ä¸‹ï¼š ![](../assets/images/Lesson5 2.png) ### ä»£ç åˆ†æ æœ¬é¡¹ç›®é‡‡ç”¨çš„æ˜¯ BME280 åº“æ–‡ä»¶ï¼Œåœ¨ Item 5.ino æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰å¯¹ SPI åº•å±‚è¿›è¡Œæ“ä½œï¼Œä¸è¿‡ï¼ŒBPI Bit S2 ESP32 S3 çš„ SPI ä½¿ç”¨å®Œå…¨å…¼å®¹ Arduinoã€‚"},"/Bit_S2_doc/en/Arduino/Environment.html":{"title":"Environment construction","content":"# Environment construction > Refer to [arduino esp32 DOC Getting Started Â» Installing](https://docs.espressif.com/projects/arduino esp32/en/latest/installing.html) ## Install support using the Arduino IDE Here's how to install the Arduino ESP32 directly from the Arduino IDE. > Starting with Arduino IDE version 1.6.4, Arduino allows installing third party platform packages using the Boards Manager. There are packages for Windows, macOS, and Linux. Arduino IDE download link: https://www.arduino.cc/en/software > The UI of Arduino IDE 2.0 is slightly different from Arduino IDE 1.8.x. This article is written based on version 1.8.13, but it does not affect the reference of users who use version 2.0. To install the esp32 platform package using Boards Managaer, follow these steps: Install current upstream Arduino IDE 1.8 or higher. Start Arduino and open the File > Preferences window and find Additional Board Manager URLs. ![](../assets/images/install_guide_preferences.png) Stable version link: ``` https://raw.githubusercontent.com/espressif/arduino esp32/gh pages/package_esp32_index.json ``` Development version link: ``` https://raw.githubusercontent.com/espressif/arduino esp32/gh pages/package_esp32_dev_index.json ``` Enter one of the release links above after Additional Board Manager URLs. You can add multiple URLs, one per line. ![](../assets/images/install_guide_boards_manager_url.png) Open Tools > Board > Board Manager from the menu to search and install the esp32 platform. ![](../assets/images/install_guide_boards_manager_esp32.png) After restarting the arduino IDE, you can see that there is an ESP32 Arduino option in the development board option. Select the model `ESP32S2 Native USB`, and then refer to the content shown in the figure below to configure it again. Improper configuration will not work, please be sure to configure it according to the content shown in the figure below! ![](../assets/images/Board_chose.png)"},"/Bit_S2_doc/en/index.html":{"title":"ã€ BPI-Bit-S2 Development Board ã€‘","content":"# ã€ BPI Bit S2 Development Board ã€‘ ## Introduce ![](assets/images/BPI Bit S2_banner.jpg) BPI Bit S2 development board is a successor to BPI Bit, inheriting most of the hardware functions. IO is compatible with micro:bit and can use most peripheral accessories of micro:bit. Support Webduino, Arduino, MicroPython & CircuitPython programming environment suitable for STEAM education. Check the [Unboxing Bit S2 Development Board](Unboxing/Introduction.html) page for details. ## Programming with CircuitPython > It is recommended to use CircuitPython to quickly get started with the BPI Bit S2 development board. ![](assets/images/CircuitPython_Repo_header_logo.jpg) CircuitPython is an open source, educational derivative of MicroPython, support and developed by Adafruit Industries. Comparing ease of use, it goes a step further on the basis of MicroPython. When the development board running CircuitPython firmware is connected to the PC, the PC will immediately recognize it as a USB storage disk. And the python script file can be copied to this disk to allow the program to run on the development board. Modern operating systems and home PCs support USB storage disks, this allows users to use it out of the box. Of course, in order to use REPL, a serial communication software needs to be installed, or a text editor that supports this function, such as Mu editor. The CircuitPython community provides an extremely rich peripheral driver library, APIs documentation, and tutorials. Even if there is no programming foundation, no hardware foundation, you can quickly get started from scratch. CircuitPython does not support some microcontroller specific libraries such as timer and hardware interrupt, nor does it support the multi threaded _thread library. It only provides the asyncio library for writing concurrent code. The code is very compatible between microcontrollers supported by CircuitPython and single board computers (SBCs) supported by Blinka. This is thanks to its efforts to unify APIs. ## Programming with MicroPython ![](assets/images/Mircopython.png) MicroPython is a lean and efficient implementation of the Python 3 programming language that includes a small subset of the Python standard library and is optimised to run on microcontrollers and in constrained environments. Crowdfunded and open sourced in 2013 by Damien P. George. The most obvious difference between it and the use of C programs to develop microcontrollers is that there is no need for lengthy compilation when verifying code. Using serial communication software, enter commands through the REPL(read eval print loop) to control the microcontroller, just like Python's REPL. It is also possible to use some tools to upload a python script file to run inside the microcontroller. Its implementation of Python3 includes the _thread library that supports multithreading and the asyncio library for writing concurrent code. MicroPython aims to be as compatible with normal Python as possible to allow you to transfer code with ease from the desktop to a microcontroller or embedded system. At the same time it also has some libraries specific for microcontrollers in order to take full advantage of the hardware features inside the microcontroller chip, such as timers, hardware interrupts, WiFi, etc., depending on the specific hardware. While having the above features, it is compact enough to fit and run within just 256k of code space and 16k of RAM. If you know Python you already know MicroPython. On the other hand, the more you learn about MicroPython the better you become at Python. ## Programming with Arduino ![](assets/images/Arduino_logo_1200x350.png) Arduino is an open source embedded hardware and software development platform for users to create interactive embedded projects. The Arduino integrated development environment (IDE) is the software core of this platform, using the C/C++ programming language to develop projects. The biggest feature of Arduino is to provide a unified API to develop all microcontrollers it supports, with very good code portability and reusability. In addition, it simplifies the process of building a development environment, and all the development environments of microcontrollers it supports can be installed and configured with a single click. It also provides simple one click mechanisms to compile and upload programs to a microcontroller. Arduino IDE alsoprovides many example codes, supplemented by a large number of comments, which can help users get started quickly. A large number of excellent open source projects accumulated in the Arduino community are available for reference and learning, and there are quite a few driver libraries and APIs provided by chip manufacturers as well. ## Programming with Webduino > BPI Bit S2 has Webduino firmware installed before delivery. ![](assets/images/Webduino_logo_1200x350.jpg) [webduino online building block programming platform](https://webbit.webduino.io/blockly/?demo default) [webduino building block programming platform Windows installation version](https://ota.webduino.io/WebBitInstaller/WebBitSetup.exe) [webduino online teaching manual](https://webbit.webduino.io/tutorials/doc/zh cn/education/index.html) ## Materials and Resources [Official WIKI](https://wiki.banana pi.org/BPI Bit S2_STEAM_%E6%95%99%E8%82%B2%E5%BC%80%E5%8F%91%E6% 9D%BF) [GitHub: BPI BPI Bit S2 Development Board Schematic PDF](https://github.com/BPI STEAM/BPI BIT Lite Doc/blob/main/sch/BPI BIT Lite V0.2.pdf) ## Sample Purchase [Official AliExpress](https://www.aliexpress.us/item/3256804809903732.html) [Official Taobao](https://item.taobao.com/item.htm?spm a213gs.success.result.1.d1187a86CepiGC&id 693462857865) OEM&OEM customized service: sales@banana pi.com"}}